<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>project1</title><style type="text/css"> * {margin:0; padding:0; text-indent:0; }
 h1 { color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 14pt; }
 .p, p { color: black; font-family:Cambria, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; margin:0pt; }
 .h3, h3 { color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 h2 { color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 12pt; }
 .s1 { color: black; font-family:"Palatino Linotype", serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 10pt; }
 .s2 { color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 .a, a { color: #00F; font-family:Cambria, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 .s3 { color: #00F; font-family:Cambria, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 .s4 { color: black; font-family:Cambria, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 .s5 { color: black; font-family:Cambria, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 .s6 { color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 .s7 { color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 .s8 { color: #8E5902; font-family:"Palatino Linotype", serif; font-style: italic; font-weight: normal; text-decoration: none; font-size: 10pt; }
 .s9 { color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 .s10 { color: #214987; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 .s12 { color: black; font-family:"Times New Roman", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 .s13 { color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 .s14 { color: #8E5902; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 .s15 { color: #214987; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 .s17 { color: #CE5B00; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: bold; text-decoration: none; font-size: 10pt; }
 li {display: block; }
 #l1 {padding-left: 0pt; }
 #l1> li>*:first-child:before {content: "• "; color: black; font-family:Cambria, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l2 {padding-left: 0pt; }
 #l2> li>*:first-child:before {content: "– "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; }
 #l3 {padding-left: 0pt; }
 #l3> li>*:first-child:before {content: "– "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; }
 #l4 {padding-left: 0pt;counter-reset: c3 1; }
 #l4> li>*:first-child:before {counter-increment: c3; content: counter(c3, decimal)". "; color: black; font-family:Cambria, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l4> li:first-child>*:first-child:before {counter-increment: c3 0;  }
 #l5 {padding-left: 0pt; }
 #l5> li>*:first-child:before {content: "– "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; }
 #l6 {padding-left: 0pt; }
 #l6> li>*:first-child:before {content: "– "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; }
 #l7 {padding-left: 0pt; }
 #l7> li>*:first-child:before {content: "– "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; }
 li {display: block; }
 #l8 {padding-left: 0pt; }
 #l8> li>*:first-child:before {content: "• "; color: black; font-family:Cambria, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l9 {padding-left: 0pt; }
 #l9> li>*:first-child:before {content: "– "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; }
 #l10 {padding-left: 0pt; }
 #l10> li>*:first-child:before {content: "– "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; }
 li {display: block; }
 #l11 {padding-left: 0pt; }
 #l11> li>*:first-child:before {content: "• "; color: black; font-family:Cambria, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
 #l12 {padding-left: 0pt; }
 #l12> li>*:first-child:before {content: "– "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; }
 #l13 {padding-left: 0pt; }
 #l13> li>*:first-child:before {content: "– "; color: black; font-family:"Palatino Linotype", serif; font-style: normal; font-weight: normal; text-decoration: none; }
 li {display: block; }
 #l14 {padding-left: 0pt; }
 #l14> li>*:first-child:before {content: "• "; color: black; font-family:Cambria, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt; }
</style></head><body><h1 style="padding-top: 5pt;padding-left: 8pt;text-indent: 0pt;text-align: left;"><a name="bookmark0">&zwnj;</a>Project Objectives</h1><p style="padding-top: 14pt;padding-left: 8pt;text-indent: 0pt;text-align: justify;">This is a partner project that involves creating functions to query an API and summarize and display data.</p><p style="padding-top: 5pt;padding-left: 7pt;text-indent: 0pt;text-align: justify;">You <span class="h3">should not use generative AI </span>for any part of this project other than for debugging programs. This will be strictly enforced.</p><p style="padding-top: 7pt;text-indent: 0pt;text-align: left;"><br/></p><h2 style="padding-left: 7pt;text-indent: 0pt;text-align: left;"><a name="bookmark1">&zwnj;</a>Setting Things Up</h2><h3 style="padding-top: 10pt;padding-left: 7pt;text-indent: 0pt;text-align: left;"><a name="bookmark2">&zwnj;</a>Creating the Repo</h3><p style="padding-top: 12pt;padding-left: 7pt;text-indent: 0pt;text-align: justify;">The first step is for one group member (you two pick) to create a github repo and link it with an RStudio project. Push up those changes so the .Rproj file exists. By using an R project you can stick to using relative file paths for everything. Next, go to the repo <span class="h3">settings </span>on github and add the <span class="s1">other </span>group member as a collaborator (you’ll need their github account). That group member then needs to accept the membership. This gives everyone access to push changes up to the repository.  <span class="h3">All project work should be done within this repo.</span></p><p style="padding-top: 4pt;text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 8pt;text-indent: 0pt;text-align: left;"><a name="bookmark3">&zwnj;</a>Repo Settings</h3><p style="padding-top: 11pt;padding-left: 8pt;text-indent: 0pt;text-align: justify;">On your github project repo you should go into the settings and enable github pages. You’ll output your files to a docs folder, similar to how we’ve done our homework assignments.</p><p style="padding-top: 7pt;text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 8pt;text-indent: 0pt;text-align: left;"><a name="bookmark4">&zwnj;</a>Collaboration Workflow</h3><p style="padding-top: 11pt;padding-left: 8pt;text-indent: 0pt;text-align: justify;">You and your partner should collaborate on the project.  You should set up a list of tasks and time- lines/milestones with flex time.</p><p style="padding-top: 4pt;text-indent: 0pt;text-align: left;"><br/></p><ul id="l1"><li data-list-text="•"><p style="padding-left: 32pt;text-indent: -12pt;text-align: left;">I know some people tend to just try to do all the work for the project themselves.</p></li><li data-list-text="•"><p style="padding-top: 8pt;padding-left: 32pt;text-indent: -12pt;text-align: left;">Sometimes people like to split things up so that one person does all the coding and one person does all the writing/narrative.</p><p style="padding-top: 3pt;text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 8pt;text-indent: 0pt;text-align: justify;">If either of these are done, both people in the group will lose credit. <span class="p">This should be a collaboration. We will be checking the commits on the repo to make sure both people are contributing substantially to the coding aspects of the project.</span></h3><h3 style="padding-top: 5pt;padding-left: 8pt;text-indent: 0pt;text-align: justify;">With this in mind, commit often! <span class="p">Don’t work a ton locally without pushing things ups. We want to see the work develop on github. Again, if we can’t see the contributions via github, both members may lose credit.</span></h3><p style="padding-top: 6pt;padding-left: 8pt;text-indent: 0pt;line-height: 153%;text-align: justify;">Please reach out early if the agreed upon milestones/work are not being completed by your partners. For collaborating, you have two options:</p></li><li data-list-text="•"><p style="padding-top: 9pt;padding-left: 32pt;text-indent: -12pt;text-align: left;">Both work on the same (main) branch (the easiest solution but least like real life). If this is the case, your workflow may look like the following:</p><ul id="l2"><li data-list-text="–"><p style="padding-top: 5pt;padding-left: 54pt;text-indent: -10pt;line-height: 13pt;text-align: left;">Each time you go to work on the project, you pull down any of the latest changes (<span class="s2">git pull</span>)</p></li><li data-list-text="–"><p style="padding-left: 54pt;text-indent: -10pt;text-align: left;">When you are satisfied with some contributions, add, commit, and push your work up to the main branch. (Remember version control is part of the system so you can always roll back changes.)</p></li><li data-list-text="–"><p style="padding-left: 46pt;text-indent: -10pt;line-height: 12pt;text-align: center;">There may occasionally be merge conflicts that have to be dealt with. This can be done with the</p><p class="s2" style="padding-left: 36pt;text-indent: 0pt;line-height: 13pt;text-align: center;">Git <span class="p">tab in RStudio. Let us know if you are having issues with conflicts that you can’t resolve!</span></p></li></ul></li><li data-list-text="•"><p style="padding-top: 5pt;padding-left: 32pt;text-indent: -12pt;text-align: left;">You each work on your own branch (or one on the main branch and one on their own branch). Notes about that process:</p><ul id="l3"><li data-list-text="–"><p style="padding-top: 6pt;padding-left: 54pt;text-indent: -10pt;line-height: 89%;text-align: left;">A branch can be created on github.com or via the command line with <span class="s2">git checkout -b new_branch_name</span>. Any work you then do will be on that branch.</p></li><li data-list-text="–"><p style="padding-left: 54pt;text-indent: -10pt;line-height: 89%;text-align: left;">In order to push up the new branch and any changes to github, you can do your usual add and commit steps. The first time you do a push step, you have to add some extra code: <span class="s2">git push</span></p><p class="s2" style="padding-left: 54pt;text-indent: 0pt;line-height: 11pt;text-align: left;">--set-upstream origin branch_name</p></li><li data-list-text="–"><p style="padding-left: 54pt;text-indent: -10pt;line-height: 12pt;text-align: left;">You can switch between branches with <span class="s2">git checkout branch_name</span></p></li><li data-list-text="–"><p style="padding-left: 54pt;text-indent: -10pt;line-height: 13pt;text-align: left;">You can merge in your branch’s changes to the <span class="s2">main </span>branch by</p><ol id="l4"><li data-list-text="1."><p style="padding-top: 1pt;padding-left: 73pt;text-indent: -12pt;line-height: 13pt;text-align: left;">Checking out the main branch: <span class="s2">git checkout main</span></p></li><li data-list-text="2."><p style="padding-left: 73pt;text-indent: -12pt;line-height: 13pt;text-align: left;">Merging your changes in: <span class="s2">git merge branch_name</span></p></li></ol></li><li data-list-text="–"><p style="padding-top: 1pt;padding-left: 54pt;text-indent: -10pt;text-align: left;">As with the other workflow, you may need to resolve merge conflicts. We’re happy to help out if you get stuck on that!</p><h2 style="padding-top: 5pt;padding-left: 8pt;text-indent: 0pt;text-align: left;"><a name="bookmark5">&zwnj;</a>Overall Goal</h2><p style="padding-top: 11pt;padding-left: 8pt;text-indent: 0pt;text-align: justify;">Our goal is to write functions that will manipulate and process data sets that come from a census API. We’ll create <span class="s1">generic </span>functions to automatically summarize and plot certain returned data. Lastly, we’ll write up a document via quarto (just like we did with the homework) to describe our thought process and give examples of using the functions. This document (web site) is what you will ultimately turn in.</p><h3 style="padding-top: 5pt;padding-left: 8pt;text-indent: 0pt;text-align: justify;">You must have a narrative throughout the document. <span class="p">This is often a place where people lose points on their first project.  A narrative means you should have a story or thread that flows throughout the document. Things like an introduction about what you are doing, discussion of what you are about to do and why/how, etc. Don’t lose these easy points!</span></h3><p style="padding-top: 7pt;text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 8pt;text-indent: 0pt;text-align: left;"><a name="bookmark6">&zwnj;</a>Data</h3><p style="padding-top: 11pt;padding-left: 8pt;text-indent: 0pt;line-height: 11pt;text-align: justify;">We are going to query the Public Use Microdata Sample (PUMS) Census API. This API gives pseudo</p><p class="s1" style="padding-left: 8pt;text-indent: 0pt;line-height: 13pt;text-align: justify;">person-level <span class="p">data. There is no need to obtain an API key but you can if you’d like.</span></p><p style="padding-top: 5pt;padding-left: 8pt;text-indent: 0pt;text-align: justify;">Now there is an overwhelming amount of information about how to deal with census data and the different APIs there are. It is incredibly easy to go down a rabbit hole with older information or alternative ways to do things. <span class="h3">I hope to give you all the resources/links you need below! </span>Feel free to Google other things but you might get lost.</p><p style="padding-top: 4pt;text-indent: 0pt;text-align: left;"><br/></p></li></ul></li><li data-list-text="•"><p style="padding-left: 32pt;text-indent: -12pt;text-align: left;"><a href="https://www.census.gov/data/developers/data-sets/census-microdata-api.html" class="a" target="_blank">Information about the PUMS</a><a href="https://www.census.gov/data/developers/data-sets/census-microdata-api.html" target="_blank"> API</a></p><ul id="l5"><li data-list-text="–"><p style="padding-top: 9pt;padding-left: 54pt;text-indent: -10pt;line-height: 13pt;text-align: left;">We aren’t going to worry about Puerto Rico data so focus on the basic PUMS information</p></li><li data-list-text="–"><p style="padding-left: 54pt;text-indent: -10pt;line-height: 12pt;text-align: left;">Pay special attention to the example function calls for each year. For instance, Example Call:</p><p class="s2" style="padding-left: 54pt;text-indent: 0pt;line-height: 13pt;text-align: left;">api.census.gov/data/2022/acs/acs1/pums?get=SEX,PWGTP,MAR&amp;SCHL=24&amp;key=YOUR_KEY</p></li></ul></li><li data-list-text="•"><p class="s3" style="padding-top: 9pt;padding-left: 32pt;text-indent: -12pt;text-align: left;"><a href="https://api.census.gov/data/2022/acs/acs1/pums/variables.html" style=" color: black; font-family:Cambria, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt;" target="_blank">The </a>list of variables <span style=" color: #000;">for the 2022 version is really useful</span></p><ul id="l6"><li data-list-text="–"><p style="padding-top: 9pt;padding-left: 54pt;text-indent: -10pt;line-height: 13pt;text-align: left;">This page gives the values the variables can take on if you click on their name.</p></li><li data-list-text="–"><p style="padding-left: 54pt;text-indent: -10pt;line-height: 12pt;text-align: left;">You can change the year in the URL to get a data dictionary for other years</p></li><li data-list-text="–"><p style="padding-left: 54pt;text-indent: -10pt;line-height: 13pt;text-align: left;">Generally, ignore ‘allocation flag’ variables. This is something about imputing data or not.</p></li></ul></li><li data-list-text="•"><p style="padding-top: 9pt;padding-left: 32pt;text-indent: -12pt;text-align: left;">We’ll want to allow the user to choose certain variables to return and choose certain conditions on what is returned (specific subsets)</p></li><li data-list-text="•"><p style="padding-top: 8pt;padding-left: 32pt;text-indent: -12pt;text-align: left;"><a href="https://api.census.gov/data/2022/acs/acs1/pums/examples.html">More examples of API calls are here</a></p></li><li data-list-text="•"><p style="padding-top: 8pt;padding-left: 32pt;text-indent: -12pt;text-align: left;"><a href="https://data.census.gov/mdat/%23/" style=" color: black; font-family:Cambria, serif; font-style: normal; font-weight: normal; text-decoration: none; font-size: 10pt;" target="_blank">A </a><a href="https://data.census.gov/mdat/%23/" class="a" target="_blank">menu based </a><span class="s3">explorer </span><span class="p">where you can see API calls </span><span class="s4" style=" background-color: #D4B3FD;">(go to the ‘download’ tab and it is at the bottom)</span></p><p style="padding-top: 7pt;text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 7pt;text-indent: 0pt;text-align: left;"><a name="bookmark7">&zwnj;</a>Data Processing</h3><p style="padding-top: 11pt;padding-left: 7pt;text-indent: 0pt;text-align: justify;">Alright, so we’ll want to write a function to query this API and return a nicely formatted tibble. When we query the API via our usual process (see notes), the data comes out pretty decently!</p><p style="padding-top: 4pt;text-indent: 0pt;text-align: left;"><br/></p></li><li data-list-text="•"><p style="padding-left: 32pt;text-indent: -12pt;text-align: left;">Start by getting the usual process to work with a given URL</p></li><li data-list-text="•"><p style="padding-top: 7pt;padding-left: 32pt;text-indent: -12pt;text-align: left;">Next, write a <span class="s1">helper </span>function to take what is returned by <span class="s2">GET() </span>and turn it into a nice <span class="s2">tibble</span>.</p></li><li data-list-text="•"><p style="padding-top: 7pt;padding-left: 32pt;text-indent: -12pt;text-align: left;">Write a function to query the API that allows the user to change the following items:</p><ul id="l7"><li data-list-text="–"><p style="padding-top: 9pt;padding-left: 54pt;text-indent: -10pt;text-align: left;">Year of survey (2022 as default). Only a single value here</p><p style="padding-top: 4pt;padding-left: 63pt;text-indent: 0pt;text-align: left;">∗ Check that a valid value was given (number between 2010 and 2022)</p></li><li data-list-text="–"><p style="padding-top: 4pt;padding-left: 54pt;text-indent: -10pt;text-align: left;"><span class="p">Specify the numeric variables to be returned </span><span class="s4" style=" background-color: #D4B3FD;">(AGEP and PWGTP as default). PWGTP should</span><span class="p"> </span><span class="s4" style=" background-color: #D4B3FD;">always be returned.</span></p><p style="padding-top: 5pt;padding-left: 73pt;text-indent: -10pt;text-align: left;">∗ Options for the user should be AGEP, GASP, GRPIP, JWAP (time), JWDP (time), and JWMNP</p><p style="padding-top: 1pt;padding-left: 73pt;text-indent: -10pt;text-align: left;">∗ Your function should turn variables into numeric values or time values (use the middle of the time period) where appropriate.</p><p style="padding-top: 2pt;padding-left: 63pt;text-indent: 0pt;text-align: left;"><span class="p">∗ </span><span class="s4" style=" background-color: #D4B3FD;">One numeric variable other than PWGTP must be returned</span></p></li><li data-list-text="–"><p style="padding-top: 4pt;padding-left: 54pt;text-indent: -10pt;text-align: left;">Specify the categorical variables to be returned (SEX as default).</p><p style="padding-top: 4pt;padding-left: 63pt;text-indent: 0pt;text-align: left;">∗ Options for the user should be FER, HHL, HISPEED, JWTRNS, SCH, SCHL, and SEX</p><p style="padding-top: 2pt;padding-left: 63pt;text-indent: 0pt;text-align: left;">∗ Your function should turn variables into factors with appropriate levels, where appropriate</p><p style="padding-top: 2pt;padding-left: 63pt;text-indent: 0pt;text-align: left;"><span class="p">∗ </span><span class="s4" style=" background-color: #D4B3FD;">One categorical variable must be returned</span></p></li><li data-list-text="–"><p style="padding-top: 4pt;padding-left: 54pt;text-indent: -10pt;text-align: left;">(Check that the variables asked for are in this set of variables)</p></li><li data-list-text="–"><p style="padding-top: 2pt;padding-left: 54pt;text-indent: -10pt;text-align: left;"><span class="s4" style=" background-color: #D4B3FD;">Specify the geography level: All, Region, Division, or State (with the default of All)</span></p><p style="padding-top: 4pt;padding-left: 63pt;text-indent: 0pt;text-align: left;">∗ Check that the value specified by the user is one of the above values</p><div class="textbox" style="background:#9642FB66;display:block;min-height:14.2pt;width:239.4pt;"><p class="s5" style="padding-top: 1pt;text-indent: 0pt;text-align: left;">what is returned - see the examples in the links above)</p></div></li></ul></li></ul><p style="text-indent: 0pt;text-align: left;"/><ul id="l8"><ul id="l9"><li data-list-text="–"><p style="padding-top: 4pt;padding-left: 54pt;text-indent: -10pt;text-align: left;"><span class="s4" style=" background-color: #D4B3FD;">An optional argument to subset the data (this subsetting should be on the API call itself, not on</span></p><p style="padding-top: 4pt;text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 73pt;text-indent: -10pt;text-align: left;">∗ User should be able to specify specific Regions, Divisions, or States for this part (and only those specified geography levels would be returned)</p><p style="padding-left: 63pt;text-indent: 0pt;text-align: left;">∗ How you allow them to specify this is up to you (you’ll have to parse it appropriately)</p></li></ul><li data-list-text="•"><p style="padding-top: 10pt;padding-left: 32pt;text-indent: -12pt;text-align: left;">Lastly, write a function that allows the user to specify multiple years of survey data (and all the other options above)</p><ul id="l10"><li data-list-text="–"><p style="padding-top: 9pt;padding-left: 54pt;text-indent: -10pt;text-align: left;">This function should call your single year function as many times as needed and then combine the data into one final tibble (a year variable should be included in this final tibble)</p><p style="padding-top: 7pt;text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 7pt;text-indent: 0pt;text-align: justify;"><a name="bookmark8">&zwnj;</a><span class="s6" style=" background-color: #D4B3FD;">Obtaining Person Level Records</span></p><p style="text-indent: 0pt;text-align: left;"><span/></p><p style="padding-top: 11pt;padding-left: 8pt;text-indent: 0pt;text-align: justify;"><span class="p">Lastly, we need to process the data in our tibble appropriately. </span><span class="s4" style=" background-color: #D4B3FD;">The</span><span class="p"> </span><span class="s7" style=" background-color: #D4B3FD;">PWGTP</span><span class="s2"> </span><span class="s4" style=" background-color: #D4B3FD;">variable actually represents the</span><span class="p"> number of (people) observations there should be for a particular row.</span></p><p style="padding-top: 5pt;padding-left: 8pt;text-indent: 0pt;text-align: justify;">We won’t do this, but we could create a new tibble with each row replicated <span class="s2">PWGTP </span>times. (This would create very large data frames in some instances and processing would be slow!)</p><p style="padding-top: 7pt;text-indent: 0pt;text-align: left;"><br/></p><h3 style="padding-left: 8pt;text-indent: 0pt;text-align: justify;"><a name="bookmark9">&zwnj;</a>Writing a Generic Function for Summarizing</h3><p style="padding-top: 12pt;padding-left: 7pt;text-indent: 0pt;line-height: 89%;text-align: justify;"><span class="h3">First steps </span>We briefly discussed the ideas around object oriented programming and method dispatch. That is, we discussed why <span class="s2">plot(iris) </span>and <span class="s2">plot(exp) </span>give different types of plots. They look at the <span class="s2">class </span>of <span class="s2">iris </span>and the <span class="s2">class </span>of <span class="s2">exp </span>and the appropriate plotting function is called.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><div class="textbox" style="background:#F8F8F8;display:block;min-height:38.1pt;width:474.0pt;"><p class="s8" style="padding-left: 2pt;text-indent: 0pt;line-height: 11pt;text-align: left;">#Run these in your console</p><p class="s9" style="padding-left: 2pt;text-indent: 0pt;line-height: 12pt;text-align: left;">plot.function <span class="s8">#what is used for a class = function</span></p><p class="s9" style="padding-left: 2pt;text-indent: 0pt;line-height: 13pt;text-align: left;"><span class="s10">getS3method</span>(<span style=" color: #4F9905;">&quot;plot&quot;</span>,<span style=" color: #4F9905;">&quot;data.frame&quot;</span>) <span class="s8">#what is used for a class = data frame</span></p></div></li></ul></li></ul><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"/><p style="padding-top: 3pt;text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 8pt;text-indent: 0pt;text-align: left;">The generic function is <span class="s2">plot()</span>. Notice that it calls <span class="s2">UseMethod(&quot;plot&quot;) </span>and that is how the appropriate plotting function is determined.</p><p style="padding-top: 10pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><span class="s12" style=" background-color: #F8F8F8;">                                      </span><span class="s13" style=" background-color: #F8F8F8;">plot                                       </span></p><p class="s2" style="padding-top: 4pt;padding-left: 8pt;text-indent: 0pt;line-height: 89%;text-align: left;">## function (x, y, ...) ## UseMethod(&quot;plot&quot;)</p><p class="s2" style="padding-left: 8pt;text-indent: 0pt;line-height: 89%;text-align: left;">## &lt;bytecode: 0x00000000131a0430&gt; ## &lt;environment: namespace:base&gt;</p><p style="padding-top: 1pt;text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 8pt;text-indent: 0pt;text-align: left;">Great, well we can add our own class to our census data for summarizing purposes.</p><p style="padding-top: 3pt;text-indent: 0pt;text-align: left;"><br/></p><ul id="l11"><li data-list-text="•"><h3 style="padding-left: 32pt;text-indent: -12pt;line-height: 89%;text-align: justify;">Go back to your function to create the data and make your tibble have an additional class of ‘census’.</h3><ul id="l12"><li data-list-text="–"><p style="padding-top: 8pt;padding-left: 54pt;text-indent: -10pt;text-align: left;">Something like:</p><p class="s2" style="padding-top: 8pt;padding-left: 32pt;text-indent: 0pt;text-align: left;">class(your_tibble) &lt;- c(&quot;census&quot;, class(your_tibble))</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 8pt;text-indent: 0pt;text-align: left;">Now we can write our own custom <span class="s2">summary </span>function for these! We simply write our function as follows:</p><p style="padding-top: 9pt;padding-left: 5pt;text-indent: 0pt;text-align: left;"><span class="s12" style=" background-color: #F8F8F8;">      </span><span class="s13" style=" background-color: #F8F8F8;">summary.census          </span><span class="s14" style=" background-color: #F8F8F8;">&lt;-          </span><span class="s15" style=" background-color: #F8F8F8;">function</span><span class="s13" style=" background-color: #F8F8F8;">(...){...}                        </span></p><p style="padding-top: 3pt;text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 8pt;text-indent: 0pt;text-align: left;">For the <span class="s2">census </span>summary method, let’s write a function that produces means and standard deviations for our numeric variable(s) and counts for our categorical variable(s).</p><p style="padding-top: 3pt;text-indent: 0pt;text-align: left;"><br/></p></li></ul></li><li data-list-text="•"><p style="padding-left: 32pt;text-indent: -12pt;text-align: justify;">This function should take three arguments: the tibble with class census, the numeric variable(s) to summarize, the categorical variable(s) to summarize.</p></li><li data-list-text="•"><p style="padding-top: 6pt;padding-left: 32pt;text-indent: -12pt;text-align: justify;">By default, it should summarize all numeric variables (other than <span class="s2">PWGTP</span>) and all categorical variables in the tibble. However, the user should be able to specify the variables they’d like to summarize if they’d like.</p><ul id="l13"><li data-list-text="–"><p style="padding-top: 8pt;padding-left: 54pt;text-indent: -10pt;text-align: left;">To find a sample mean for a numeric variable, we would do something like this:</p><p class="s2" style="padding-top: 8pt;padding-left: 32pt;text-indent: 0pt;text-align: left;">sum(numeric_vector*weight_vector)/sum(weight_vector)</p></li><li data-list-text="–"><p style="padding-top: 8pt;padding-left: 54pt;text-indent: -10pt;text-align: left;">To find a sample standard deviation:</p><p class="s2" style="padding-top: 8pt;padding-left: 32pt;text-indent: 0pt;text-align: left;">sqrt(sum(numeric_vectorˆ2*weight_vector)/sum(weight_vector)-sample_meanˆ2)</p></li><li data-list-text="–"><p style="padding-top: 8pt;padding-left: 54pt;text-indent: -10pt;text-align: left;">Return the values as a named list</p><p style="padding-top: 2pt;text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 7pt;text-indent: 0pt;text-align: left;">Test out this function by running <span class="s2">summary(_your_census_tibble_) </span>on something you’ve returned from your census API function.</p><p style="padding-top: 5pt;padding-left: 7pt;text-indent: 0pt;text-align: left;">Similarly, let’s create a generic <span class="s2">plot() </span>function for a <span class="s2">census </span>class tibble. Require the user to specify one categorical variable and one numeric variable for plotting purposes.</p><p style="padding-top: 6pt;padding-left: 7pt;text-indent: 0pt;text-align: left;">We haven’t covered plotting yet so I’ll provide the generic code for it below:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><div class="textbox" style="background:#F8F8F8;display:block;min-height:51.0pt;width:474.0pt;"><p class="s10" style="padding-left: 2pt;text-indent: 0pt;line-height: 12pt;text-align: left;">library<span class="s9">(ggplot2) </span><span class="s8"># put this in your setup code chunk</span></p><p class="s10" style="padding-left: 2pt;text-indent: 0pt;line-height: 12pt;text-align: left;">ggplot<span class="s9">(_your_census_tibble_or_modification_,</span></p><p class="s9" style="padding-left: 13pt;text-indent: 26pt;line-height: 89%;text-align: left;"><span class="s10">aes</span>(<span style=" color: #214987;">x = </span><span class="s10">get</span>(cat_var), <span style=" color: #214987;">y = </span><span class="s10">get</span>(num_var), <span style=" color: #214987;">weight = </span>PWGTP)) <span class="s17">+ </span><span class="s10">geom_boxplot</span>()</p></div></li></ul></li></ul><p style="padding-left: 5pt;text-indent: 0pt;text-align: left;"/><p style="padding-top: 4pt;text-indent: 0pt;text-align: left;"><br/></p><ul id="l14"><li data-list-text="•"><p style="padding-left: 32pt;text-indent: -12pt;text-align: left;">The <span class="s2">weight = PWGTP </span>argument accounts for the weights when making the plots.</p></li><li data-list-text="•"><p style="padding-top: 6pt;padding-left: 32pt;text-indent: -12pt;text-align: left;">I have <span class="s2">get(cat_var) </span>and <span class="s2">get(num_var) </span>within the function as I’m assuming you’ll pass the column names as strings.</p><h2 style="padding-top: 5pt;padding-left: 8pt;text-indent: 0pt;text-align: left;"><a name="bookmark10">&zwnj;</a>Web Page</h2><p style="padding-top: 11pt;padding-left: 8pt;text-indent: 0pt;text-align: left;">Your web page should have a narrative going through your process of creating the above functions and testing them.</p><p style="padding-top: 6pt;padding-left: 8pt;text-indent: 0pt;text-align: left;">You should have a section at the end where you investigate something interesting from the data using your API function and plotting/summarizing functions.</p><p style="padding-top: 7pt;text-indent: 0pt;text-align: left;"><br/></p><h2 style="padding-left: 8pt;text-indent: 0pt;text-align: left;"><a name="bookmark11">&zwnj;</a>Submission</h2><p style="padding-top: 11pt;padding-left: 8pt;text-indent: 0pt;text-align: left;">For the submission link, you should give the link to your nicely rendered webpage!</p><h1 style="padding-top: 6pt;padding-left: 8pt;text-indent: 0pt;text-align: left;"><a name="bookmark12">&zwnj;</a>Rubric for Grading (total = 100 points)</h1><p style="padding-top: 7pt;text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 8pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span/></p><p style="padding-top: 1pt;padding-bottom: 3pt;padding-left: 8pt;text-indent: 0pt;text-align: left;">Item                             Points   Notes</p><p style="padding-left: 8pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span/></p><p style="padding-top: 1pt;padding-left: 8pt;text-indent: 0pt;text-align: left;">Data Processing Functions               35     Worth either 0, 2.5, 5, . . . 35</p><p style="padding-left: 8pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Generic Functions                    35     Worth either 0, 2.5, 5, . . . 35</p><p style="padding-top: 1pt;padding-left: 8pt;text-indent: 0pt;text-align: left;">Narrative/Introduction/End Example/Good Coding/etc.</p><p style="padding-top: 1pt;padding-left: 8pt;text-indent: 0pt;text-align: left;">30    Worth either 0, 2.5, 5, . . . 30</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 8pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span/></p><p style="padding-top: 8pt;text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 8pt;text-indent: 0pt;text-align: left;">Notes on grading:</p><p style="padding-top: 4pt;text-indent: 0pt;text-align: left;"><br/></p></li><li data-list-text="•"><p style="padding-left: 32pt;text-indent: -12pt;text-align: left;">For each item in the rubric, your grade will be lowered one level for each each error (syntax, logical, or other) in the code and for each required item that is missing or lacking a description.</p></li><li data-list-text="•"><p style="padding-top: 7pt;padding-left: 32pt;text-indent: -12pt;text-align: left;">You should use Good Programming Practices when coding (see wolfware). If you do not follow GPP you can lose up to 50 points on the project.</p></li><li data-list-text="•"><p style="padding-top: 8pt;padding-left: 32pt;text-indent: -12pt;text-align: left;">If the webpage doesn’t work correctly you can lose up to 30 points.</p></li></ul></body></html>
